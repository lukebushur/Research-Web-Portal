<div class="student-opportunites-search-page-container">
    <div class="header" style="padding: 0.5em 0.5em;">
        <h1>Opportunites Search</h1>
        <!-- Search input for opportunities -->
        <mat-form-field>
            <input matInput type="text" placeholder="Search..." [(ngModel)]="searchQuery" (keypress)="onSearchKeyPress($event)">
        </mat-form-field>
        <button mat-raised-button (click)="onSearchButtonClick()" style="margin-left: 0.5em">Search</button>
    </div>
    
    <mat-accordion class="oppExpansion">
      <mat-expansion-panel (opened)="panelOpenState = true"
                           (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Show Filters for Majors
          </mat-panel-title>
        </mat-expansion-panel-header> 
        <div>
          <mat-checkbox *ngFor="let major of availableMajors" (change)="onCheckboxChange(major, $event.checked)">
            {{ major }}
          </mat-checkbox>
        </div>
        
      </mat-expansion-panel>
    </mat-accordion>

    <!-- filtered opportunities -->
    <div class="opps-container">
        <div *ngFor="let opportunity of filteredOpportunities" class="opportunities-container">
            <mat-card class="opp-card">
              <mat-card-header>
                <mat-card-title class="opp-title">
                  <div [matTooltip]="opportunity.title" class="max-two-lines">{{ opportunity.title }}</div>
                </mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <div class="content-container">
                  <div class="field-title">Professor: </div>
                  <div [matTooltip]="opportunity.professorEmail">{{ opportunity.professorName }}</div>
                  <div class="field-title">Posted: </div>
                  <div>{{ dateToString(opportunity.posted) }}</div>
                  <div class="field-title">GPA Requirement: </div>
                  <div>{{ opportunity.GPA ? opportunity.GPA : "N/A" }}</div>
                  <div class="field-title">Description: </div>
                  <div class="field-content">
                    <div [matTooltip]="opportunity.description" class="max-two-lines">{{ opportunity.description }}</div>
                  </div>
                </div>
                <mat-divider class="divider"></mat-divider>
              </mat-card-content>
              <mat-card-actions class="actions-container">
                <button mat-button color="primary" (click)="applyToOpportunity(opportunity)"
                    [disabled]="!meetRequirements(opportunity)">{{ 'APPLY' }}</button>
                <button mat-button color="secondary" (click)="viewProject(opportunity)">VIEW</button>
              </mat-card-actions>
            </mat-card>
        </div>
    </div>
</div>