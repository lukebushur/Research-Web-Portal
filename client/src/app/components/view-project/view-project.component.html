<div *ngIf="projectData !== -1" id="applicantData">
  <cdk-accordion class="example-accordion">
    <cdk-accordion-item #questionAccordionItem="cdkAccordionItem" class="example-accordion-item" role="button"
      tabindex="0" [attr.id]="'question-accordion-header'" [attr.aria-expanded]="questionAccordionItem.expanded"
      [expanded]="true" [attr.aria-controls]="'question-accordion-body'">
      <div class="example-accordion-item-header" (click)="questionAccordionItem.toggle()">
        Question data
        <span class="example-accordion-item-description">
          Click to {{ questionAccordionItem.expanded ? 'close' : 'open' }}
        </span>
      </div>

      <div class="example-accordion-item-body" role="region"
        [style.display]="questionAccordionItem.expanded ? '' : 'none'" [attr.id]="'question-accordion-body'"
        [attr.aria-labelledby]="'question-accordion-header'">

        <p>Title: </p>
        <p>{{projectData.projectName}}</p>
        <br>
        <p>Description: </p>
        <p>{{projectData.description}}</p>
        <br>
        <p>Responsibilities: </p>
        <p>{{projectData.responsibilities}}</p>
        <br>
        <p>Posted: </p>
        <p>{{posted}}</p>
        <br>
        <p>Deadline: </p>
        <p>{{deadline}}</p>
        <br>
        <p>GPA Requirement: </p>
        <p>{{projectData.GPA}}</p>
        <br>
        <p>Questions</p>
        <div *ngFor="let question of projectData.questions; index as i">
          <label id="question-label">Question {{ i + 1}}:<br> {{ question.question }}</label>
          <div *ngIf="question.requirementType === 'radio button'">
            <mat-radio-button *ngFor="let choice of question.choices; index as j" [disabled]="true">{{
                            choice
                            }}</mat-radio-button>
          </div>
          <div *ngIf="question.requirementType === 'check box'" class="radio-group">
            <mat-checkbox *ngFor="let choice of question.choices; index as j" [disabled]="true">{{ choice
                            }}</mat-checkbox>
          </div>
          <div *ngIf="question.requirementType === 'text'">
            <mat-form-field>
              <textarea matInput readonly></textarea>
            </mat-form-field>
          </div>
        </div>
      </div>
    </cdk-accordion-item>
  </cdk-accordion>

  <cdk-accordion class="example-accordion">
    <cdk-accordion-item #accordionItem="cdkAccordionItem" class="example-accordion-item" role="button" tabindex="1"
      [attr.id]="'accordion-header-'" [attr.aria-expanded]="accordionItem.expanded" [expanded]="true"
      [attr.aria-controls]="'accordion-body-'">
      <div class="example-accordion-item-header" (click)="accordionItem.toggle()">
        Applicant data
        <span class="example-accordion-item-description">
          Click to {{ accordionItem.expanded ? 'close' : 'open' }}
        </span>
      </div>

      <div class="example-accordion-item-body" role="region" [style.display]="accordionItem.expanded ? '' : 'none'"
        [attr.id]="'accordion-body-'" [attr.aria-labelledby]="'accordion-header-'">

        <p>Applications for project: {{ projectName }}</p>

        <table class="example-full-width" cellspacing="0">
          <tr>
            <td>
              <mat-form-field class="example-full-width">
                <mat-label>Search by Name</mat-label>
                <input matInput #input placeholder="Ex. Sean Tierney" [(ngModel)]="SearchName">
              </mat-form-field>
            </td>
            <td>
              <mat-form-field class="example-full-width">
                <mat-label>Search by Major</mat-label>
                <input matInput #input placeholder="Ex. Computer Science, Biology, ..." [(ngModel)]="SearchMajor">
              </mat-form-field>
            </td>
            <td>
              <mat-form-field class="example-full-width">
                <mat-label>Search by Email</mat-label>
                <input matInput #input placeholder="email@example.com" [(ngModel)]="SearchEmail">
              </mat-form-field>
            </td>
            <td>
              <div class="example-label-container">
                <label id="example-name-label" class="example-name-label">GPA Range: </label>
                <label class="example-value-label">{{minGPA}} - {{maxGPA}}</label>
              </div>
              <mat-slider min="0" max="4" step="0.1" [showTickMarks]="true" [discrete]="false">
                <input value="2" matSliderStartThumb [(ngModel)]="minGPA">
                <input value="4" matSliderEndThumb [(ngModel)]="maxGPA">
              </mat-slider>
            </td>
            <td>
              <button mat-raised-button color="primary" (click)="updateTable()" class="accept-button">Search</button>
            </td>

          </tr>
        </table>

        <table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)" class="mat-elevation-z8">

          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by name">
              Name
            </th>
            <td mat-cell *matCellDef="let student"> {{student.name}} </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="gpa">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by GPA">
              GPA
            </th>
            <td mat-cell *matCellDef="let student"> {{student.GPA}} </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="majors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by major">
              Majors
            </th>
            <td mat-cell *matCellDef="let student"> {{student.majors}} </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by email">
              Email
            </th>
            <td mat-cell *matCellDef="let student"> {{student.email}} </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by status">
              Status
            </th>
            <td mat-cell *matCellDef="let student">
              <p *ngIf="student.status === 'Accept' || student.status === 'Reject'"
                [class.accept-status-text]="student.status === 'Accept'"
                [class.reject-status-text]="student.status === 'Reject'" class="status-text">
                {{student.status}}ed
              </p>
              <!-- <p *ngIf="student.status === 'Rejected'" [style.background-color]="'red'">{{student.status}}</p> -->
              <button *ngIf="student.status === 'Pending'" mat-raised-button color="primary"
                (click)="applicationDecision(student.application, 'Accept')" class="accept-button">Accept</button>
              <button *ngIf="student.status === 'Pending'" mat-raised-button color="warn"
                (click)="applicationDecision(student.application, 'Reject')">Reject</button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
    </cdk-accordion-item>
  </cdk-accordion>
</div>

<app-spinner></app-spinner>
